

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ingestion &mdash; CXP SearchHub 0.63.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=afbf3d36" />

  
    <link rel="shortcut icon" href="_static/favicon.jpg"/>
    <link rel="canonical" href="https://commerceexperts.github.io/searchhub-docs/ingestion.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5bb3c584"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Search Collector" href="search-collector.html" />
    <link rel="prev" title="Integration Guide" href="integration-guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2B2D42" >

          
          
          <a href="index.html">
            
              <img src="_static/logo-searchhub.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="integration-guide.html">Integration Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ingestion</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#search-analytics-data">1. Search Analytics Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#frontend-search-tracking">Frontend Search Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#google-analytics-api-access">Google Analytics API Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analytics-file-export">Analytics File Export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#necessary-export-kpis">Necessary Export KPIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-format">Data Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#curated-queries">2. Curated Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="#product-data">3. Product Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="search-collector.html">Search Collector</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_smartquery.html">Module: smartQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_smartsuggest.html">Module: smartSuggest</a></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Common Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2B2D42" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CXP SearchHub</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Ingestion</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ingestion.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ingestion">
<h1>Ingestion<a class="headerlink" href="#ingestion" title="Link to this heading"></a></h1>
<p>searchHub primarily relies on search-analytics data. However, the following types of data are used to further improve the outcome.</p>
<ol class="arabic simple">
<li><p>Search Analytics Data</p></li>
<li><p>Curated Queries</p></li>
<li><p>Product Data</p></li>
</ol>
<p>See below what to consider when creating the respective data feeds.</p>
<section id="search-analytics-data">
<h2>1. Search Analytics Data<a class="headerlink" href="#search-analytics-data" title="Link to this heading"></a></h2>
<p>We provide the following methods of ingesting analytics data:</p>
<ul class="simple">
<li><p><strong>Frontend Search Tracking</strong></p></li>
<li><p><strong>Google-Analytics, API access.</strong></p></li>
<li><p><strong>File exports:</strong></p>
<ul>
<li><p>via pull from a URL</p></li>
<li><p>or via secure FTP account access</p></li>
<li><p>In the absence of an analytics system, we offer a log-, or raw-file ingestion service. This professional service extracts the necessary information directly from the respective data source. <strong>Please contact us, to speak about this option or to discuss other options in more detail.</strong></p></li>
</ul>
</li>
</ul>
<section id="frontend-search-tracking">
<h3>Frontend Search Tracking<a class="headerlink" href="#frontend-search-tracking" title="Link to this heading"></a></h3>
<p>For the best searchHub integration, we recommend the using our <a class="reference external" href="/search-collector.html">Search Collector</a> tracking solution. To ensure minimal effort, we offer a shop-specific integration script ready to be embedded. Apply your own data attributes, for a more stable integration. <a class="reference external" href="/search-collector.html">Read full Search Collector documentation</a> for more details.</p>
</section>
<section id="google-analytics-api-access">
<h3>Google Analytics API Access<a class="headerlink" href="#google-analytics-api-access" title="Link to this heading"></a></h3>
<p>API access to Google Analytics (UA or GA4) is a secondary option. However, site search tracking is no longer standard in GA4. For this reason, it’s necessary to create a custom search-tracking integration within GA4, for it to work.</p>
<p>To connect searchHub to your GA data, please <a class="reference external" href="https://support.google.com/analytics/answer/1009702?hl=en">grant access</a> to at least the ‘Viewer’ role to the following two accounts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">searchhub</span><span class="nd">@searchhub</span><span class="o">-</span><span class="n">analytics</span><span class="o">.</span><span class="n">iam</span><span class="o">.</span><span class="n">gserviceaccount</span><span class="o">.</span><span class="n">com</span>
<span class="n">analytics</span><span class="nd">@commerce</span><span class="o">-</span><span class="n">experts</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>Once done, please contact us so that we can set up the data-ingestion process on our end.</p>
</section>
<section id="analytics-file-export">
<h3>Analytics File Export<a class="headerlink" href="#analytics-file-export" title="Link to this heading"></a></h3>
<p>In the event you are unable to grant API access to your analytics system, a file export is also acceptable. Please make sure to provide these files regulary in order to ensure sustainability and system continuity.</p>
<section id="necessary-export-kpis">
<h4>Necessary Export KPIs<a class="headerlink" href="#necessary-export-kpis" title="Link to this heading"></a></h4>
<p>Most important for searchHub are user generated search queries (user queries) and their corresponding KPIs. Below is a list of the most useful search KPIs:</p>
<ul class="simple">
<li><p>Search-Frequency (Required!)</p></li>
<li><p>Match-Count</p></li>
<li><p>Unique Clicks per Query or click-through-rate / CTR</p></li>
<li><p>Clicks to Basket</p></li>
<li><p>Revenue per Search</p></li>
<li><p>Total-Revenue</p></li>
<li><p>Exit-Rate</p></li>
</ul>
<p>These KPIs allow searchHub to make better decisions. Your selection depends upon your search query optimization goal. Ex.: you want to lover the zero-match rate - then “Match Count” must be included in your analytics export.</p>
</section>
<section id="data-format">
<h4>Data Format<a class="headerlink" href="#data-format" title="Link to this heading"></a></h4>
<p>As a data format, we prefer CSV/TSV feeds that meet the following conditions:</p>
<ul>
<li><p>The export is clearly assigned to a single tenant / shop / sales channel</p></li>
<li><p>Conforms to the following naming convention:
<code class="docutils literal notranslate"><span class="pre">&lt;custom-prefix&gt;.&lt;tenant&gt;.&lt;date:YYYY-MM-DD&gt;.&lt;file-extension&gt;</span></code></p>
<p>Explanation to naming convention:</p>
<ul>
<li><p>A custom prefix or other custom strings are allowed to be added to the filename, e.g. “export”</p></li>
<li><p>The tenant (shop, or sales channel) must be part of the file name! See the <a class="reference external" href="glossary.html">glossary</a> concerning what a <a class="reference external" href="../glossary.html#tenant">tenant</a> is. You can use your own designation, the only requirement is that it must be unique.</p></li>
<li><p>Each export is associated with a certain date.</p>
<p>If the export contains data from more than a day, choose the latest date.</p>
</li>
</ul>
</li>
</ul>
<p>The delimiters and the order of the information is not important. The filename must simply contain the necessary information.</p>
</section>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">analytics-export.myshop.de.2024-12-20.csv</span></code>:</p>
</section>
</section>
</section>
<section id="curated-queries">
<h2>2. Curated Queries<a class="headerlink" href="#curated-queries" title="Link to this heading"></a></h2>
<p>If you have curated landing pages for certain queries or optimized search results, you can export the corresponding queries and searchHub will prefer these and automatically increase the traffic to them.
This can be a simple text file with the name of the tenant (shop or sales channel), e.g. <code class="docutils literal notranslate"><span class="pre">curated-queries.&lt;tenant&gt;.txt</span></code> or any other format from which such queries may be easily extracted.</p>
</section>
<section id="product-data">
<h2>3. Product Data<a class="headerlink" href="#product-data" title="Link to this heading"></a></h2>
<p>Product data is used to enrich search analytics but also for a tenant specific language model. Therefor data should be provided on variant level with according variant titles (e.g. “Men’s shirt, green, XL”).
As a file format we prefer CSV or the Google-Shopping-Feed-XML format. The feed should be provided as single file from a HTTP location, S3 or GCP bucket.</p>
<p>Those are the required data fields:</p>
<ul class="simple">
<li><p><strong>id</strong>
The provided IDs should be identical to what is exposed in the shop frontend, so that we can map the tracked data to it. If main-product-IDs are exposed, then two IDs should be available for each product: one to map with the tracked data and the other to be a unique identifier for each article.</p></li>
<li><p><strong>title</strong></p></li>
<li><p><strong>image-url</strong></p></li>
<li><p><strong>categories</strong>
A category can be a hierarchical path like “Fashion/Men/Shirts” and it’s also possible to have multiple categories for a product in the same field like “Fashion/Men/Shirts|Fashion/Sale”</p></li>
<li><p><strong>brand</strong></p></li>
</ul>
<p>optionally we can also use:</p>
<ul class="simple">
<li><p><strong>product-type</strong>
In case the categories are not suitable to classify the products, a separate product-type can be provided.</p></li>
<li><p><strong>attributes</strong>
If the titles of different variants of the same product do not distinguish the variants good enough, the crucial attributes should be added to the feed.</p></li>
<li><p><strong>product-url</strong>
Might be relevant if they are seo friendly and contain proper text.</p></li>
</ul>
<p><strong>Please contact us directly, if you have other data formats / structures / feeds and no possibility to transform them into the appropriate format.</strong></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="integration-guide.html" class="btn btn-neutral float-left" title="Integration Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="search-collector.html" class="btn btn-neutral float-right" title="Search Collector" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright , CXP Commerce Experts GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>