Ingestion
=========

Search|Hub primarily relies on search-analytics data. However, the following types of data are used to further improve the outcome. 

#. Search Analytics Data
#. Curated Queries / whitelisted queries
#. Product Data

See below what to consider when creating the respective data feeds.

  
1. Search Analytics Data
------------------------

We provide the following methods of ingesting analytics data:

- **Google-Analytics, API access.**

- **File exports:**

  - via pull from a URL
  
  - or via secure FTP account access
  
  - In the absence of an analytics system, we offer a log-, or raw-file ingestion service. This professional service extracts the necessary information directly from the respective data source. **Please contact us, to speak about this option or to discuss other options in more detail.**


Google Analytics API Access
^^^^^^^^^^^^^^^^^^^^^^^^^^^

API access to Google Analytics site-search analytics view is preferred. To do so, please `grant access`_ with at least the 'Viewer' role to the following two accounts:

:: 

    searchhub@searchhub-analytics.iam.gserviceaccount.com
    analytics@commerce-experts.com
    
Once done, please contact us so that we can set up the data-ingestion process on our end.


Analytics File Export
^^^^^^^^^^^^^^^^^^^^^

In the event you are unable to grant API access to your analytics system, a file export is also acceptable. Please make sure to provide these files regulary in order to ensure sustainability and system continuity.

Necessary Export KPIs
"""""""""""""""""""""
Most important for Search|Hub are user generated search queries (user queries) and their corresponding KPIs. Below is a list of the most useful search KPIs:

- Search-Frequency (Required!)
- Match-Count
- Unique Clicks per Query or CTR
- Clicks to Basket
- Revenue per Search
- Total-Revenue
- Exit-Rate

These KPIs allow Search|Hub to make better decisions. Your selection depends upon your search query optimization goal. Ex.: you want to lover the zero-match rate - then "Match Count" must be included in your analytics export.

Data Format
"""""""""""
As a data format, we prefer CSV/TSV feeds that meet the following conditions:

- The export is clearly assigned to a single tenant / shop / sales channel

- Conforms to the following naming convention: 
  ``<custom-prefix>.<tenant>.<date:YYYY-MM-DD>.<file-extension>``

  Explanation to naming convention: 

  - A custom prefix or other custom strings are allowed to be added to the filename, e.g. "export"

  - The tenant (shop, or sales channel) must be part of the file name! See the `glossary`_ concerning what a `tenant`_ is. You can use your own designation, the only requirement is that it must be unique.
    
  - Each export is associated with a certain date. 

    If the export contains data from more than a day, choose the latest date.

The delimiters and the order of the information is not important. The filename must simply contain the necessary information.


2. Curated Queries
------------------

If you have curated landing pages for certain queries or optimized search results, you can export the corresponding queries and Search|Hub will prefer these and automatically increase the traffic to them.
This can be a simple text file with the name of the tenant (shop or sales channel), e.g. ``curated-queries.<tenant>.txt`` or any other format from which such queries may be easily extracted.


3. Product Data
---------------

Product data should be provided as a Google Shopping Feed and contain all types of linguistic data, such as:

- title
- product type
- descriptions
- categories
- brand

optionally we can also use:

- attributes
- image urls
- product url


**Please contact us directly, if you have other data formats / structures / feeds and no possibility to transform them into the appropriate format.**


.. _glossary: glossary.html
.. _tenant: ../glossary.html#tenant
.. _grant access: https://support.google.com/analytics/answer/1009702?hl=en
